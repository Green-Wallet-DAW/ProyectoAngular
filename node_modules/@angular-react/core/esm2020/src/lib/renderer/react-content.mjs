// Copyright (c) Microsoft Corporation. All rights reserved.
// Licensed under the MIT License.
import * as React from 'react';
import * as ReactDOM from 'react-dom';
import * as dom from '../utils/dom/dom-utils';
const DEBUG = false;
export const CHILDREN_TO_APPEND_PROP = 'children-to-append';
/**
 * Creates a new `ReactContent` element.
 * @param children The children to append to the `ReactContent` element.
 * @param additionalProps _Optional_. @see `ReactContentProps`.
 */
export function createReactContentElement(children, additionalProps) {
    return React.createElement(ReactContent, {
        ...additionalProps,
        [CHILDREN_TO_APPEND_PROP]: children,
    });
}
/**
 * Render any `HTMLElement`s as a child of React components.
 * Supports two rendering modes:
 *  1. `legacy` - append `<react-content>` as the root, and nest the `children-to-append` underneath it.
 *  2. `new` (**default**) - append the `children-to-append` to the parent of this component, and hide the `<react-content>` element.
 *     (similar to how `router-outlet` behaves in Angular).
 */
export class ReactContent extends React.PureComponent {
    componentDidMount() {
        const element = ReactDOM.findDOMNode(this);
        if (this.props[CHILDREN_TO_APPEND_PROP]) {
            if (DEBUG) {
                console.warn('ReactContent Component > componentDidMount > childrenToAppend:', this.props[CHILDREN_TO_APPEND_PROP]);
            }
            const hostElement = this.props.legacyRenderMode ? element : element.parentElement;
            // Only add children not already in the DOM
            this.props[CHILDREN_TO_APPEND_PROP].filter(child => !dom.isNodeInDOM(child)).forEach(child => hostElement.appendChild(child));
        }
    }
    render() {
        // TODO: See if we can just render React.Fragment and the children within it, having no extra DOM nodes.
        return React.createElement('react-content', !this.props.legacyRenderMode && { style: { display: 'none' } });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVhY3QtY29udGVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvY29yZS9zcmMvbGliL3JlbmRlcmVyL3JlYWN0LWNvbnRlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNERBQTREO0FBQzVELGtDQUFrQztBQUVsQyxPQUFPLEtBQUssS0FBSyxNQUFNLE9BQU8sQ0FBQztBQUMvQixPQUFPLEtBQUssUUFBUSxNQUFNLFdBQVcsQ0FBQztBQUN0QyxPQUFPLEtBQUssR0FBRyxNQUFNLHdCQUF3QixDQUFDO0FBRTlDLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNwQixNQUFNLENBQUMsTUFBTSx1QkFBdUIsR0FBRyxvQkFBb0IsQ0FBQztBQWdCNUQ7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSx5QkFBeUIsQ0FBQyxRQUFvQyxFQUFFLGVBQW1DO0lBQ2pILE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxZQUFZLEVBQUU7UUFDdkMsR0FBRyxlQUFlO1FBQ2xCLENBQUMsdUJBQXVCLENBQUMsRUFBRSxRQUFRO0tBQ3BDLENBQUMsQ0FBQztBQUNMLENBQUM7QUFTRDs7Ozs7O0dBTUc7QUFDSCxNQUFNLE9BQU8sWUFBYSxTQUFRLEtBQUssQ0FBQyxhQUF3QztJQUM5RSxpQkFBaUI7UUFDZixNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzNDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxFQUFFO1lBQ3ZDLElBQUksS0FBSyxFQUFFO2dCQUNULE9BQU8sQ0FBQyxJQUFJLENBQ1YsZ0VBQWdFLEVBQ2hFLElBQUksQ0FBQyxLQUFLLENBQUMsdUJBQXVCLENBQUMsQ0FDcEMsQ0FBQzthQUNIO1lBRUQsTUFBTSxXQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1lBRWxGLDJDQUEyQztZQUMzQyxJQUFJLENBQUMsS0FBSyxDQUFDLHVCQUF1QixDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQzNGLFdBQVcsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQy9CLENBQUM7U0FDSDtJQUNILENBQUM7SUFFRCxNQUFNO1FBQ0osd0dBQXdHO1FBQ3hHLE9BQU8sS0FBSyxDQUFDLGFBQWEsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGdCQUFnQixJQUFJLEVBQUUsS0FBSyxFQUFFLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM5RyxDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuLy8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xyXG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnLi4vdXRpbHMvZG9tL2RvbS11dGlscyc7XHJcblxyXG5jb25zdCBERUJVRyA9IGZhbHNlO1xyXG5leHBvcnQgY29uc3QgQ0hJTERSRU5fVE9fQVBQRU5EX1BST1AgPSAnY2hpbGRyZW4tdG8tYXBwZW5kJztcclxuXHJcbi8qKlxyXG4gKiBQcm9wcyB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gYFJlYWN0Q29udGVudGAgZnJvbSB1c2Vycy5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3RDb250ZW50UHJvcHMge1xyXG4gIC8qKlxyXG4gICAqIFVzZSB0aGUgbGVnYWN5IHJlbmRlcmluZyBtb2RlLlxyXG4gICAqXHJcbiAgICogVXNlcyBhIHNpbWlsYXIgYXBwcm9hY2ggdG8gYHJvdXRlci1vdXRsZXRgLCB3aGVyZSB0aGUgY2hpbGQgZWxlbWVudHMgYXJlIGFkZGVkIHRvIHRoZSBwYXJlbnQsIGluc3RlYWQgb2YgdGhpcyBub2RlLCBhbmQgdGhpcyBpcyBoaWRkZW4uXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBmYWxzZVxyXG4gICAqL1xyXG4gIGxlZ2FjeVJlbmRlck1vZGU/OiBib29sZWFuO1xyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBgUmVhY3RDb250ZW50YCBlbGVtZW50LlxyXG4gKiBAcGFyYW0gY2hpbGRyZW4gVGhlIGNoaWxkcmVuIHRvIGFwcGVuZCB0byB0aGUgYFJlYWN0Q29udGVudGAgZWxlbWVudC5cclxuICogQHBhcmFtIGFkZGl0aW9uYWxQcm9wcyBfT3B0aW9uYWxfLiBAc2VlIGBSZWFjdENvbnRlbnRQcm9wc2AuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVhY3RDb250ZW50RWxlbWVudChjaGlsZHJlbjogUmVhZG9ubHlBcnJheTxIVE1MRWxlbWVudD4sIGFkZGl0aW9uYWxQcm9wcz86IFJlYWN0Q29udGVudFByb3BzKSB7XHJcbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoUmVhY3RDb250ZW50LCB7XHJcbiAgICAuLi5hZGRpdGlvbmFsUHJvcHMsXHJcbiAgICBbQ0hJTERSRU5fVE9fQVBQRU5EX1BST1BdOiBjaGlsZHJlbixcclxuICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuaW50ZXJmYWNlIEludGVybmFsUmVhY3RDb250ZW50UHJvcHMgZXh0ZW5kcyBSZWFjdENvbnRlbnRQcm9wcyB7XHJcbiAgcmVhZG9ubHkgW0NISUxEUkVOX1RPX0FQUEVORF9QUk9QXTogUmVhZG9ubHlBcnJheTxIVE1MRWxlbWVudD47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZW5kZXIgYW55IGBIVE1MRWxlbWVudGBzIGFzIGEgY2hpbGQgb2YgUmVhY3QgY29tcG9uZW50cy5cclxuICogU3VwcG9ydHMgdHdvIHJlbmRlcmluZyBtb2RlczpcclxuICogIDEuIGBsZWdhY3lgIC0gYXBwZW5kIGA8cmVhY3QtY29udGVudD5gIGFzIHRoZSByb290LCBhbmQgbmVzdCB0aGUgYGNoaWxkcmVuLXRvLWFwcGVuZGAgdW5kZXJuZWF0aCBpdC5cclxuICogIDIuIGBuZXdgICgqKmRlZmF1bHQqKikgLSBhcHBlbmQgdGhlIGBjaGlsZHJlbi10by1hcHBlbmRgIHRvIHRoZSBwYXJlbnQgb2YgdGhpcyBjb21wb25lbnQsIGFuZCBoaWRlIHRoZSBgPHJlYWN0LWNvbnRlbnQ+YCBlbGVtZW50LlxyXG4gKiAgICAgKHNpbWlsYXIgdG8gaG93IGByb3V0ZXItb3V0bGV0YCBiZWhhdmVzIGluIEFuZ3VsYXIpLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFJlYWN0Q29udGVudCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQ8SW50ZXJuYWxSZWFjdENvbnRlbnRQcm9wcz4ge1xyXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xyXG4gICAgY29uc3QgZWxlbWVudCA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xyXG4gICAgaWYgKHRoaXMucHJvcHNbQ0hJTERSRU5fVE9fQVBQRU5EX1BST1BdKSB7XHJcbiAgICAgIGlmIChERUJVRykge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcclxuICAgICAgICAgICdSZWFjdENvbnRlbnQgQ29tcG9uZW50ID4gY29tcG9uZW50RGlkTW91bnQgPiBjaGlsZHJlblRvQXBwZW5kOicsXHJcbiAgICAgICAgICB0aGlzLnByb3BzW0NISUxEUkVOX1RPX0FQUEVORF9QUk9QXVxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGhvc3RFbGVtZW50ID0gdGhpcy5wcm9wcy5sZWdhY3lSZW5kZXJNb2RlID8gZWxlbWVudCA6IGVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuXHJcbiAgICAgIC8vIE9ubHkgYWRkIGNoaWxkcmVuIG5vdCBhbHJlYWR5IGluIHRoZSBET01cclxuICAgICAgdGhpcy5wcm9wc1tDSElMRFJFTl9UT19BUFBFTkRfUFJPUF0uZmlsdGVyKGNoaWxkID0+ICFkb20uaXNOb2RlSW5ET00oY2hpbGQpKS5mb3JFYWNoKGNoaWxkID0+XHJcbiAgICAgICAgaG9zdEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGQpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICAvLyBUT0RPOiBTZWUgaWYgd2UgY2FuIGp1c3QgcmVuZGVyIFJlYWN0LkZyYWdtZW50IGFuZCB0aGUgY2hpbGRyZW4gd2l0aGluIGl0LCBoYXZpbmcgbm8gZXh0cmEgRE9NIG5vZGVzLlxyXG4gICAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoJ3JlYWN0LWNvbnRlbnQnLCAhdGhpcy5wcm9wcy5sZWdhY3lSZW5kZXJNb2RlICYmIHsgc3R5bGU6IHsgZGlzcGxheTogJ25vbmUnIH0gfSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==